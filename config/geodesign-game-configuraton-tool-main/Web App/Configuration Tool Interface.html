<!DOCTYPE html>
<html>
<head>
    <title>Config Generator</title>
    <!-- Include Leaflet CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <!-- Include the map.js file -->
    <script src="map.js"></script>

    <style>
        /* Add custom styles here */
        #map {
            height: 600px;
        }
    </style>
</head>
<body>
    <h1>Config Generator</h1>
    <form id="config-form">
        <label for="city-name">City Name:</label>
        <input type="text" name="city-name" required><br>

        <label for="city-description">City Description:</label>
        <textarea name="city-description" required></textarea><br>

        <label for="selected-ebas">Choose EBAs:</label><br>
        <input type="checkbox" name="selected-ebas" value="eba1"> EBA 1<br>
        <input type="checkbox" name="selected-ebas" value="eba2"> EBA 2<br>
        <!-- Add more EBA checkboxes as needed -->

        <label for="mean-cost">Mean Cost of EBAs:</label>
        <input type="number" name="mean-cost" required><br>

        <label for="currency">Choose Currency:</label>
        <select name="currency" required>
            <option value="EUR">EUR</option>
            <option value="USD">USD</option>
            <!-- Add more currency options as needed -->
        </select><br>

        <label for="city-budget">City Budget:</label>
        <input type="number" name="city-budget" required><br>

        <!-- Hidden input fields for map center and bounds -->
        <input type="hidden" id="map-center" name="map-center">
        <input type="hidden" id="map-bounds" name="map-bounds">

        <input type="submit" value="Generate Config">
    </form>

    <div id="map"></div> <!-- Map container -->

    <!-- Include Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <script>
        // JavaScript code for handling the map and updating hidden input fields
        const map = L.map('map').setView([51.5074, -0.1278], 10);

        // Replace 'your_mapbox_access_token' with your Mapbox access token
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=your_mapbox_access_token', {
            attribution: '&copy; <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1
        }).addTo(map);

        // Event listener for form submission
        document.getElementById('config-form').addEventListener('submit', function (event) {
            event.preventDefault();
            // Get map center and bounds
            const mapCenter = map.getCenter();
            const mapBounds = map.getBounds();

            // Update the hidden input fields with the map data
            document.getElementById('map-center').value = JSON.stringify({
                lat: mapCenter.lat,
                lng: mapCenter.lng
            });
            document.getElementById('map-bounds').value = JSON.stringify({
                north: mapBounds.getNorth(),
                south: mapBounds.getSouth(),
                east: mapBounds.getEast(),
                west: mapBounds.getWest()
            });

            // Submit the form
            this.submit();
        });
    </script>
</body>
</html>
